<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 5: DOM Manipulation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border-color: #e2e8f0;
            --accent-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --code-bg: #f8fafc;
            --code-border: #e2e8f0;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            line-height: 1.6;
        }

        .layout-container {
            display: flex;
            min-height: calc(100vh - 58px);
        }

        /* Left Instruction Panel */
        .instruction-panel {
            width: 50%;
            background-color: var(--bg-primary);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            position: fixed;
            height: calc(100vh - 58px);
            left: 0;
            top: 58px;
        }

        .instruction-header {
            padding: 2rem;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--bg-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-button {
            background-color: var(--accent-color);
            color: white;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-button:hover {
            background-color: #2563eb;
            transform: translateY(-1px);
            color: white;
            text-decoration: none;
        }

        .instruction-header h1 {
            font-size: 2rem;
            font-weight: 700;
            margin: 0;
            color: var(--text-primary);
        }

        .lesson-meta {
            font-size: 1rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .instruction-content {
            padding: 2rem;
        }

        .section {
            margin-bottom: 2.5rem;
        }

        .section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent-color);
        }

        .section h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            margin-top: 1.5rem;
        }

        .section p {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.7;
        }

        .objectives-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .objectives-list li {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.75rem;
            background-color: var(--bg-tertiary);
            border-radius: 8px;
            border-left: 4px solid var(--accent-color);
        }

        .objectives-list li .icon {
            color: var(--accent-color);
            margin-top: 0.125rem;
            font-size: 0.875rem;
        }

        .explanation-box {
            background-color: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid var(--success-color);
        }

        .explanation-box h4 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tag-explanation {
            background-color: var(--code-bg);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid var(--code-border);
        }

        .tag-item {
            display: flex;
            flex-direction: column;
            margin-bottom: 1.25rem;
            padding-bottom: 1.25rem;
            border-bottom: 1px solid var(--border-color);
        }

        .tag-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .tag-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .tag-name {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.875rem;
            background-color: var(--accent-color);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 500;
        }

        .tag-purpose {
            color: var(--text-muted);
            font-size: 0.875rem;
            font-weight: 500;
        }

        .tag-description {
            color: var(--text-secondary);
            font-size: 0.9375rem;
            line-height: 1.6;
        }

        .progress-container {
            background-color: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .progress-bar {
            background-color: var(--border-color);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .progress-fill {
            background-color: var(--accent-color);
            height: 100%;
            width: 10%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        /* Right Hands-on Panel */
        .hands-on-panel {
            width: 50%;
            margin-left: 50%;
            display: flex;
            flex-direction: column;
            background-color: var(--bg-primary);
            height: calc(100vh - 58px);}

        .hands-on-header {
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .hands-on-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
            color: var(--text-primary);
        }

        .activity-badge {
            background-color: var(--accent-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .editor-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 1rem;
            gap: 1rem;
            height: calc(100vh - 58px - 4rem);
            overflow: hidden;
        }

        .editor-section {
            flex: 1;
            background-color: var(--bg-primary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            overflow: hidden;
            min-height: 0;
            display: flex;
            flex-direction: column;
        }

        .editor-header {
            background-color: var(--bg-secondary);
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .editor-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .run-button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .run-button:hover {
            background-color: #059669;
            transform: translateY(-1px);
        }

        #editor {
            flex: 1;
            width: 100%;
            min-height: 300px;
        }

        .output-section {
            flex: 1;
            background-color: var(--bg-primary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        min-height: 200px;
            display: flex;
            flex-direction: column;
        }

        .output-header {
            background-color: var(--bg-secondary);
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.5rem;
        }

        .expand-btn {
            background: none;
            border: none;
            padding: 0.25rem;
            cursor: pointer;
            color: var(--text-secondary);
            border-radius: 4px;
            line-height: 0;
        }

        .expand-btn:hover {
            background-color: var(--border-color);
            color: var(--text-primary);
        }

        .expand-btn svg {
            width: 16px;
            height: 16px;
        }

        #output {
            flex: 1;
            background: white;
            border: none;
            width: 100%;
        min-height: 0;
        }

        .tip-box {
            background-color: #fef3c7;
            border: 1px solid #fde68a;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid var(--warning-color);
        }

        .tip-box h5 {
            color: #92400e;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tip-box p {
            color: #92400e;
            margin: 0;
            font-size: 0.9375rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .layout-container {
                flex-direction: column;
            }

            .instruction-panel {
                width: 100%;
                height: auto;
                position: relative;
                top: 0;
            }

            .hands-on-panel {
                width: 100%;
                margin-left: 0;
                margin-top: 0;
                min-height: calc(100vh - 58px);
                height: auto;
            }

            .editor-container {
                height: calc(100vh - 58px - 2rem);
            }

            .instruction-header,
            .hands-on-header {
                padding: 1rem;
            }

            .instruction-content {
                padding: 1rem;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="auth-container">
        <style>
            .navbar {
                border-bottom: 1px solid #dedede;
            }

            .layout-container {
                min-height: calc(100vh - 58px);
            }

            .instruction-panel {}
        </style>
        <nav class="navbar navbar-expand bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand" href="/">Learn to Decode - Classes</a>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <!-- <div class="navbar-nav">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                        <a class="nav-link" href="#">Features</a>
                        <a class="nav-link" href="#">Pricing</a>
                    </div> -->
                </div>
                <div id="profile-container" class="dropdown d-none">
                    <img id="profile-picture" src="" class="rounded-circle dropdown-toggle"
                        style="width: 40px; height: 40px;" data-bs-toggle="dropdown" aria-expanded="false">
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li>
                            <h6 class="dropdown-header" id="profile-nickname"></h6>
                        </li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="#" id="logout-button">Logout</a></li>
                    </ul>
                </div>
                <div class="ms-auto">
                    <div id="login-container" class="d-none">
                        <ul class="navbar-nav">
                            <li class="nav-item"><a class="nav-link" href="#" id="sign-up-button">Sign Up</a></li>
                            <li class="nav-item"><a class="nav-link" href="#" id="login-button">Login</a></li>
                        </ul>
                    </div>
                    <div id="profile-container" class="dropdown d-none">
                        <a href="#">
                            <img id="profile-picture" src="" class="rounded-circle dropdown-toggle"
                                style="width: 40px; height: 40px;" data-bs-toggle="dropdown" aria-expanded="false">
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <h6 class="dropdown-header" id="profile-nickname"></h6>
                            </li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#" id="logout-button">Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
        <script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>
        <script src="auth0-service.js"></script>
        <script src="login.js"></script>
    </div>

    <div class="layout-container">
        <!-- Left Instruction Panel -->
        <div class="instruction-panel">
            <div class="instruction-header">
                <div>
                    <h1>Lesson 5: DOM Manipulation</h1>
                    <div class="lesson-meta">
                        <div class="meta-item">
                            <i class="fas fa-clock text-muted"></i>
                            <span>45 minutes</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-users text-muted"></i>
                            <span>Ages 8-18+</span>
                        </div>
                    </div>
                </div>
                <a href="index.html?lesson=5" class="back-button">
                    <i class="fas fa-arrow-left"></i> Back to Lessons
                </a>
            </div>

            <div class="instruction-content">
                <div class="progress-container">
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="fw-medium">Lesson Progress</span>
                        <span class="text-muted" id="progress-text">10%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                </div>

                <div class="section">
                    <h2><i class="fas fa-edit"></i> What You'll Learn Today</h2>
                    <p>Today, you'll gain the superpower to change any part of your webpage using JavaScript. We'll
                        explore the Document Object Model (DOM), which is a map of your HTML page that JavaScript can
                        read and modify.</p>

                    <div class="explanation-box">
                        <h4><i class="fas fa-question-circle"></i> What is the DOM?</h4>
                        <p>The browser turns your HTML code into a tree-like structure called the DOM. Each HTML tag
                            becomes a "node" or "element" in this tree. JavaScript can access this tree to find, change,
                            add, or delete elements, making your pages fully dynamic and interactive.</p>
                    </div>

                    <h3>Learning Objectives</h3>
                    <ul class="objectives-list">
                        <li>
                            <i class="fas fa-check-circle icon"></i>
                            <div>
                                <strong>Understand the DOM structure</strong> and how it represents your HTML.
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle icon"></i>
                            <div>
                                <strong>Select and modify HTML elements</strong> using their ID.
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle icon"></i>
                            <div>
                                <strong>Change content and styling dynamically</strong> in response to user actions.
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="section">
                    <h2><i class="fas fa-cogs"></i> Core DOM Methods</h2>
                    <p>JavaScript gives us special functions (called methods) to interact with the DOM. Here are the key
                        ones for today's lesson:</p>

                    <div class="tag-explanation">
                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">document.getElementById('id')</span>
                                <span class="tag-purpose">Select an Element</span>
                            </div>
                            <div class="tag-description">
                                This is the most common way to grab a specific element from your page. You give it the
                                ID of the element you want, and it returns that element as a JavaScript object.
                            </div>
                        </div>

                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">element.innerHTML</span>
                                <span class="tag-purpose">Change Content</span>
                            </div>
                            <div class="tag-description">
                                Once you have an element, you can use its <code>innerHTML</code> property to read or
                                change the HTML content inside it.
                            </div>
                        </div>

                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">element.className</span>
                                <span class="tag-purpose">Change CSS Class</span>
                            </div>
                            <div class="tag-description">
                                This property lets you change the CSS classes applied to an element, allowing you to
                                dynamically change its appearance using pre-defined Bootstrap styles.
                            </div>
                        </div>
                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">document.createElement('div')</span>
                                <span class="tag-purpose">Create a New Element</span>
                            </div>
                            <div class="tag-description">
                                You can create brand new HTML elements from scratch in JavaScript. This is incredibly
                                powerful for building dynamic lists or adding content to the page.
                            </div>
                        </div>
                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">container.appendChild(element)</span>
                                <span class="tag-purpose">Add Element to Page</span>
                            </div>
                            <div class="tag-description">
                                After creating an element, you need to add it to the page. You first select a container
                                element and then use <code>appendChild</code> to place your new element inside it.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2><i class="fas fa-tasks"></i> Your Mission: Code DOM Manipulation</h2>
                    <p>In the editor on the right, you'll find three empty JavaScript functions. Your job is to fill in the missing code step by step. Each function controls what happens when you click the buttons. Test your code by clicking "Run Code" and then trying the buttons!</p>

                    <div class="tip-box">
                        <h5><i class="fas fa-lightbulb"></i> Pro Tip</h5>
                        <p>Follow the pattern: 1. Select the element with <code>document.getElementById()</code>. 2. Modify its properties like <code>innerHTML</code> or <code>className</code>. Don't forget the semicolons!</p>
                    </div>

                    <ul class="objectives-list">
                        <li>
                            <i class="fas fa-edit icon"></i>
                            <div>
                                <strong>Step 1: Complete the `changeContent()` function</strong><br>
                                Find the empty <code>changeContent()</code> function in the editor. Fill in the missing code:
                                <br>• Write: <code>const element = document.getElementById('dynamicContent');</code>
                                <br>• Write: <code>element.innerHTML = '&lt;strong&gt;Content changed with JavaScript!&lt;/strong&gt;';</code>
                                <br>• Write: <code>element.className = 'alert alert-success';</code>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-plus-square icon"></i>
                            <div>
                                <strong>Step 2: Complete the `addElement()` function</strong><br>
                                Fill in the missing code in the <code>addElement()</code> function:
                                <br>• Write: <code>const container = document.getElementById('newElements');</code>
                                <br>• Write: <code>const newDiv = document.createElement('div');</code>
                                <br>• Write: <code>newDiv.className = 'alert alert-warning mt-2';</code>
                                <br>• Write: <code>newDiv.innerHTML = '&lt;strong&gt;New element added!&lt;/strong&gt;';</code>
                                <br>• Write: <code>container.appendChild(newDiv);</code>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-undo icon"></i>
                            <div>
                                <strong>Step 3: Complete the `resetDemo()` function</strong><br>
                                Fill in the missing code to reset everything back to the original state:
                                <br>• Write: <code>const element = document.getElementById('dynamicContent');</code>
                                <br>• Write: <code>element.innerHTML = 'Original content here';</code>
                                <br>• Write: <code>element.className = 'alert alert-info';</code>
                                <br>• Write: <code>document.getElementById('newElements').innerHTML = '';</code>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="section">
                    <h2><i class="fas fa-home"></i> Take It Home</h2>
                    <p>Practice your new DOM manipulation skills by adding more buttons and functions. Can you make a
                        button that changes the color of the heading? Or a button that adds an image to the page? In the
                        next lesson, we'll use these skills to work with lists of data using arrays and loops.</p>
                </div>
            </div>
        </div>

        <!-- Right Hands-on Panel -->
        <div class="hands-on-panel">
            <div class="hands-on-header">
                <h2 class="hands-on-title">DOM Manipulation Editor</h2>
                <span class="activity-badge">Activity: Dynamic Content</span>
            </div>

            <div class="editor-container">
                <!-- Code Editor -->
                <div class="editor-section">
                    <div class="editor-header">
                        <div class="editor-title">
                            <i class="fas fa-file-code"></i>
                            index.html
                        </div>
                        <button class="run-button" onclick="runCode()">
                            <i class="fas fa-play"></i> Run Code
                        </button>
                    </div>
                    <div id="editor"></div>
                </div>

                <!-- Output -->
                <div class="output-section">
                    <div class="output-header">
                        <div class="d-flex align-items-center" style="gap: 0.5rem;">
                            <i class="fas fa-desktop"></i>
                            <span>Live Preview</span>
                        </div>
                        <button class="expand-btn" id="openPreviewBtn" title="Open in new tab">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path
                                    d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" />
                            </svg>
                        </button>
                    </div>
                    <iframe id="output"></iframe>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <script>
        // Define openPreviewInNewTab in global scope so it can be accessed by the button
        let globalEditor;

        function openPreviewInNewTab() {
            if (globalEditor) {
                const code = globalEditor.getValue();
                const blob = new Blob([code], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                window.open(url, '_blank');
            }
        }

        let editor;

        // Initialize Monaco Editor
        require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs' } });
        require(['vs/editor/editor.main'], function () {
            editor = monaco.editor.create(document.getElementById('editor'), {
                value: `<!DOCTYPE html>
<html>
<head>
    <title>DOM Manipulation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding: 20px; }
        #newElements .alert {
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <div class="container text-center">
        <h3>DOM Manipulation Demo</h3>
        <div id="dynamicContent" class="alert alert-info">Original content here</div>
        
        <button class="btn btn-primary me-2" onclick="changeContent()">Change Text</button>
        <button class="btn btn-success me-2" onclick="addElement()">Add Element</button>
        <button class="btn btn-danger" onclick="resetDemo()">Reset</button>
        
        <div id="newElements" class="mt-3"></div>
    </div>

    <script>
        // Your mission: Implement these functions!

        function changeContent() {
            // Step 1: Select the element with the id "dynamicContent"
            
            // Step 2: Change its innerHTML to "<strong>Content changed with JavaScript!</strong>"
            
            // Step 3: Change its className to "alert alert-success"
            
        }
        
        function addElement() {
            // Step 1: Select the container with the id "newElements"
            
            // Step 2: Create a new div element
            
            // Step 3: Set its className to "alert alert-warning mt-2"
            
            // Step 4: Set its innerHTML to show a message
            
            // Step 5: Append the new div to the container
            
        }
        
        function resetDemo() {
            // Step 1: Select the "dynamicContent" element
            
            // Step 2: Restore its original text
            
            // Step 3: Restore its original class
            
            // Step 4: Clear all new elements
            
        }
    <\/script>

</body>
</html>`,
                language: 'html',
                theme: 'vs',
                fontSize: 14,
                minimap: { enabled: false },
                scrollBeyondLastLine: false,
                automaticLayout: true,
                tabSize: 4,
                insertSpaces: true,
                wordWrap: 'on',
                lineNumbers: 'on',
                folding: true,
                bracketMatching: 'always',
                autoIndent: 'full'
            });

            // Store reference to global scope
            globalEditor = editor;

            // Auto-run code when user stops typing
            let timeout;
            editor.onDidChangeModelContent(() => {
                clearTimeout(timeout);
                timeout = setTimeout(runCode, 500);
            });

            // Initial run
            runCode();

            // Attach event listener to the open preview button
            document.getElementById('openPreviewBtn').addEventListener('click', openPreviewInNewTab);
        });

        function runCode() {
            const code = editor.getValue();
            const output = document.getElementById('output');

            const blob = new Blob([code], { type: 'text/html' });
            const url = URL.createObjectURL(blob);

            output.src = url;

            updateProgress(code);
        }

        function updateProgress(code) {
            const progressFill = document.querySelector('.progress-fill');
            const progressText = document.getElementById('progress-text');
            let progress = 10;

            // Step 1: changeContent() function implementation
            if (code.includes("const element = document.getElementById('dynamicContent')")) progress += 10;
            if (code.includes("element.innerHTML = '<strong>Content changed with JavaScript!</strong>'")) progress += 10;
            if (code.includes("element.className = 'alert alert-success'")) progress += 10;
            
            // Step 2: addElement() function implementation
            if (code.includes("const container = document.getElementById('newElements')")) progress += 10;
            if (code.includes("const newDiv = document.createElement('div')")) progress += 15;
            if (code.includes("newDiv.className = 'alert alert-warning mt-2'")) progress += 10;
            if (code.includes("newDiv.innerHTML = '<strong>New element added!</strong>'")) progress += 10;
            if (code.includes("container.appendChild(newDiv)")) progress += 15;
            
            // Step 3: resetDemo() function implementation
            if (code.includes("innerHTML = 'Original content here'")) progress += 5;
            if (code.includes("className = 'alert alert-info'")) progress += 5;

            const finalProgress = Math.min(progress, 100);
            progressFill.style.width = finalProgress + '%';
            progressText.textContent = finalProgress + '%';
        }

        login();
    </script>
</body>

</html>