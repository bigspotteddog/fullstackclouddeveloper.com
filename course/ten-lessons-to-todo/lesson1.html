<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 1: Hello World & HTML Basics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    </script>

    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border-color: #e2e8f0;
            --accent-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --code-bg: #f8fafc;
            --code-border: #e2e8f0;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            line-height: 1.6;
        }

        .layout-container {
            display: flex;
            min-height: calc(100vh - 58px);
        }

        /* Left Instruction Panel - 50% */
        .instruction-panel {
            width: 50%;
            background-color: var(--bg-primary);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            position: fixed;
            height: calc(100vh - 58px);
            left: 0;
            top: 58px;
        }

        .instruction-header {
            padding: 2rem;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--bg-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-button {
            background-color: var(--accent-color);
            color: white;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-button:hover {
            background-color: #2563eb;
            transform: translateY(-1px);
            color: white;
            text-decoration: none;
        }

        .instruction-header h1 {
            font-size: 2rem;
            font-weight: 700;
            margin: 0;
            color: var(--text-primary);
        }

        .lesson-meta {
            font-size: 1rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .instruction-content {
            padding: 2rem;
        }

        .section {
            margin-bottom: 2.5rem;
        }

        .section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent-color);
        }

        .section h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            margin-top: 1.5rem;
        }

        .section p {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.7;
        }

        .objectives-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .objectives-list li {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.75rem;
            background-color: var(--bg-tertiary);
            border-radius: 8px;
            border-left: 4px solid var(--accent-color);
        }

        .objectives-list li .icon {
            color: var(--accent-color);
            margin-top: 0.125rem;
            font-size: 0.875rem;
        }

        .explanation-box {
            background-color: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid var(--success-color);
        }

        .explanation-box h4 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tag-explanation {
            background-color: var(--code-bg);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid var(--code-border);
        }

        .tag-item {
            display: flex;
            flex-direction: column;
            margin-bottom: 1.25rem;
            padding-bottom: 1.25rem;
            border-bottom: 1px solid var(--border-color);
        }

        .tag-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .tag-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .tag-name {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.875rem;
            background-color: var(--accent-color);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 500;
        }

        .tag-purpose {
            color: var(--text-muted);
            font-size: 0.875rem;
            font-weight: 500;
        }

        .tag-description {
            color: var(--text-secondary);
            font-size: 0.9375rem;
            line-height: 1.6;
        }

        .progress-container {
            background-color: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .progress-bar {
            background-color: var(--border-color);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .progress-fill {
            background-color: var(--accent-color);
            height: 100%;
            width: 10%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        /* Right Hands-on Panel - 50% */
        .hands-on-panel {
            width: 50%;
            margin-left: 50%;
            display: flex;
            flex-direction: column;
            background-color: var(--bg-primary);
            height: calc(100vh - 58px);}

        .hands-on-header {
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .hands-on-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
            color: var(--text-primary);
        }

        .activity-badge {
            background-color: var(--accent-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .editor-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 1rem;
            gap: 1rem;
            height: calc(100vh - 58px - 4rem);
            overflow: hidden;
        }

        .editor-section {
            flex: 1;
            background-color: var(--bg-primary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            overflow: hidden;
            min-height: 0;
            display: flex;
            flex-direction: column;
        }

        .editor-header {
            background-color: var(--bg-secondary);
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .editor-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .run-button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .run-button:hover {
            background-color: #2563eb;
            transform: translateY(-1px);
        }

        #editor {
            flex: 1;
            width: 100%;
            min-height: 300px;
        }

        .output-section {
            flex: 1;
            background-color: var(--bg-primary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        min-height: 200px;
            display: flex;
            flex-direction: column;
        }

        .output-header {
            background-color: var(--bg-secondary);
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.5rem;
        }

        .expand-btn {
            background: none;
            border: none;
            padding: 0.25rem;
            cursor: pointer;
            color: var(--text-secondary);
            border-radius: 4px;
            line-height: 0;
        }

        .expand-btn:hover {
            background-color: var(--border-color);
            color: var(--text-primary);
        }

        .expand-btn svg {
            width: 16px;
            height: 16px;
        }

        #output {
            flex: 1;
            background: white;
            border: none;
            width: 100%;
        min-height: 0;
        }

        .tip-box {
            background-color: #fef3c7;
            border: 1px solid #fde68a;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid var(--warning-color);
        }

        .tip-box h5 {
            color: #92400e;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tip-box p {
            color: #92400e;
            margin: 0;
            font-size: 0.9375rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .layout-container {
                flex-direction: column;
            }

            .instruction-panel {
                width: 100%;
                height: auto;
                position: relative;
                top: 0;
            }

            .hands-on-panel {
                width: 100%;
                margin-left: 0;
                margin-top: 0;
                min-height: calc(100vh - 58px);
                height: auto;
            }

            .editor-container {
                height: calc(100vh - 58px - 2rem);
            }

            .instruction-header,
            .hands-on-header {
                padding: 1rem;
            }

            .instruction-content {
                padding: 1rem;
            }
        }

        /* Upgrade Button Styles */
        #upgrade-button {
            background-color: #f59e0b; /* amber-500 */
            border-color: #f59e0b;
        }

        #upgrade-button:hover {
            background-color: #d97706; /* amber-600 */
            border-color: #d97706;
        }

        #upgrade-button i {
            margin-right: 0.25rem;
        }

        /* Payment Modal Styles */
        .modal-content {
            border: none;
            border-radius: 0.5rem;
        }

        .modal-header {
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            border-radius: 0.5rem 0.5rem 0 0 !important;
        }

        .modal-footer {
            background-color: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            border-radius: 0 0 0.5rem 0.5rem !important;
        }

        .card {
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        }

        .card-header {
            font-weight: 600;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <!-- <script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>
    <script src="auth0-service.js"></script>
    <script src="login.js"></script> -->
</head>

<body>
    <div class="auth-container">
        <style>
            .navbar {
                border-bottom: 1px solid #dedede;
            }

            .layout-container {
                min-height: calc(100vh - 58px);
            }

            .instruction-panel {}
        </style>
        <nav class="navbar navbar-expand bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand" href="/">Full Stack Cloud Developer</a>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <!-- <div class="navbar-nav">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                        <a class="nav-link" href="#">Features</a>
                        <a class="nav-link" href="#">Pricing</a>
                    </div> -->
                </div>
                <div id="profile-container" class="dropdown d-none">
                    <img id="profile-picture" src="" class="rounded-circle dropdown-toggle"
                        style="width: 40px; height: 40px;" data-bs-toggle="dropdown" aria-expanded="false">
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li>
                            <h6 class="dropdown-header" id="profile-nickname"></h6>
                        </li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="#" id="logout-button">Logout</a></li>
                    </ul>
                </div>
                <div class="ms-auto d-flex align-items-center">
                    <div id="login-container" class="d-none">
                        <ul class="navbar-nav">
                            <li class="nav-item"><a class="nav-link" href="#" id="sign-up-button">Sign Up</a></li>
                            <li class="nav-item"><a class="nav-link" href="#" id="login-button">Login</a></li>
                        </ul>
                    </div>
                    <div id="upgrade-container" class="d-none ms-3">
                        <button class="btn btn-primary btn-sm" id="upgrade-button" data-bs-toggle="modal" data-bs-target="#paymentModal">
                            <i class="fas fa-crown"></i> Upgrade - $5.00
                        </button>
                    </div>
                    <div id="profile-container" class="dropdown d-none">
                        <a href="#">
                            <img id="profile-picture" src="" class="rounded-circle dropdown-toggle"
                                style="width: 40px; height: 40px;" data-bs-toggle="dropdown" aria-expanded="false">
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <h6 class="dropdown-header" id="profile-nickname"></h6>
                            </li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#" id="logout-button">Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
    </div>

    <div class="layout-container">
        <!-- Left Instruction Panel - 50% -->
        <div class="instruction-panel">
            <div class="instruction-header">
                <div>
                    <h1>Lesson 1: Hello World & HTML Basics</h1>
                    <div class="lesson-meta">
                        <div class="meta-item">
                            <i class="fas fa-clock text-muted"></i>
                            <span>45 minutes</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-users text-muted"></i>
                            <span>Ages 8-18+</span>
                        </div>
                    </div>
                </div>
                <a href="index.html?lesson=1" class="back-button">
                    <i class="fas fa-arrow-left"></i> Back to Lessons
                </a>
            </div>

            <div class="instruction-content">
                <div class="progress-container">
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="fw-medium">Lesson Progress</span>
                        <span class="text-muted" id="progress-text">10%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                </div>

                <div class="section">
                    <h2><i class="fas fa-bullseye"></i> What You'll Learn Today</h2>
                    <p>Welcome to your first web development lesson! Today marks the beginning of an exciting journey
                        where you'll learn to create websites from scratch. By the end of this lesson, you'll have built
                        your very first webpage and understand the fundamental building blocks that make up every
                        website on the internet.</p>

                    <div class="explanation-box">
                        <h4><i class="fas fa-question-circle"></i> Why Learn HTML?</h4>
                        <p>HTML (HyperText Markup Language) is like the skeleton of a webpage - it gives structure and
                            meaning to all the content you see online. Every website you've ever visited, from Google to
                            YouTube to your favorite games, starts with HTML. Learning HTML is your first step into the
                            amazing world of web development!</p>
                    </div>

                    <h3>Learning Objectives</h3>
                    <ul class="objectives-list">
                        <li>
                            <i class="fas fa-check-circle icon"></i>
                            <div>
                                <strong>Understand what HTML is</strong> - Learn how websites are built with code and
                                how HTML creates the structure of web pages
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle icon"></i>
                            <div>
                                <strong>Create your first HTML file</strong> - Write actual code and see it come to life
                                in a web browser
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle icon"></i>
                            <div>
                                <strong>Master basic HTML structure</strong> - Learn the essential elements that every
                                webpage needs to work properly
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="section">
                    <h2><i class="fas fa-code"></i> Understanding HTML Tags</h2>
                    <p>HTML uses "tags" to tell the browser what each piece of content should be. Think of tags like
                        instructions - they tell the browser "this is a heading," "this is a paragraph," or "this is an
                        image." Let's explore the essential tags you'll use today:</p>

                    <div class="tag-explanation">
                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">&lt;!DOCTYPE html&gt;</span>
                                <span class="tag-purpose">Document Declaration</span>
                            </div>
                            <div class="tag-description">
                                This special tag tells the browser that this is an HTML5 document. It's like showing
                                your ID at the door - it helps the browser understand what type of file it's reading.
                                Always put this at the very top of your HTML file.
                            </div>
                        </div>

                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">&lt;html&gt;</span>
                                <span class="tag-purpose">Root Container</span>
                            </div>
                            <div class="tag-description">
                                This is the main container that holds everything in your webpage. Think of it like a big
                                box that contains all your content. Everything else goes inside this tag.
                            </div>
                        </div>

                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">&lt;head&gt;</span>
                                <span class="tag-purpose">Page Information</span>
                            </div>
                            <div class="tag-description">
                                The head section contains information ABOUT your webpage that visitors don't see
                                directly. It's like the envelope of a letter - it has important information, but it's
                                not the actual message.
                            </div>
                        </div>

                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">&lt;title&gt;</span>
                                <span class="tag-purpose">Browser Tab Title</span>
                            </div>
                            <div class="tag-description">
                                This sets the text that appears in your browser tab. It's what people see when they
                                bookmark your page or see it in search results. Make it descriptive and interesting!
                            </div>
                        </div>

                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">&lt;body&gt;</span>
                                <span class="tag-purpose">Visible Content</span>
                            </div>
                            <div class="tag-description">
                                Everything inside the body tag is what visitors actually see on your webpage. Text,
                                images, buttons - if it's visible, it goes in the body. This is where the magic happens!
                            </div>
                        </div>

                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">&lt;h1&gt; to &lt;h6&gt;</span>
                                <span class="tag-purpose">Headings</span>
                            </div>
                            <div class="tag-description">
                                These create headings of different sizes. h1 is the biggest (like a book title), h2 is
                                smaller (like a chapter title), and so on. They help organize your content and make it
                                easy to read.
                            </div>
                        </div>

                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">&lt;p&gt;</span>
                                <span class="tag-purpose">Paragraphs</span>
                            </div>
                            <div class="tag-description">
                                Use these for regular text content. Each p tag creates a new paragraph with space above
                                and below it. Most of your text content will be inside paragraph tags.
                            </div>
                        </div>

                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">&lt;img&gt;</span>
                                <span class="tag-purpose">Images</span>
                            </div>
                            <div class="tag-description">
                                This tag displays images on your webpage. It's special because it doesn't need a closing
                                tag! You tell it which image to show using the "src" attribute, and you should always
                                include "alt" text to describe the image.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2><i class="fas fa-tasks"></i> Your Mission</h2>
                    <p>Now it's time to put this knowledge into practice! In the editor on the right, you'll see a basic
                        HTML structure already started for you. Your mission is to:</p>

                    <div class="tip-box">
                        <h5><i class="fas fa-lightbulb"></i> Pro Tip</h5>
                        <p>The code will automatically run as you type, so you can see your changes immediately in the
                            preview below!</p>
                    </div>

                    <ul class="objectives-list">
                        <li>
                            <i class="fas fa-edit icon"></i>
                            <div>
                                <strong>Customize the content</strong> - Change the text to make it about yourself. Add
                                your name, age, and favorite things!
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-plus icon"></i>
                            <div>
                                <strong>Add more elements</strong> - Try adding more headings, paragraphs, or even
                                experimenting with the image
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-eye icon"></i>
                            <div>
                                <strong>Watch it come to life</strong> - See how your HTML code transforms into a real
                                webpage in the preview
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="section">
                    <h2><i class="fas fa-home"></i> Take It Home</h2>
                    <p>For homework, create your own "About Me" page using what you've learned today. Include your name,
                        age, hobbies, favorite foods, or anything else you'd like to share. Remember to use different
                        heading sizes and paragraphs to organize your information clearly.</p>

                    <p>This is just the beginning of your web development journey. In our next lesson, we'll learn how
                        to make your webpage look amazing with colors and styling using CSS!</p>
                </div>
            </div>
        </div>

        <!-- Right Hands-on Panel - 50% -->
        <div class="hands-on-panel">
            <div class="hands-on-header">
                <h2 class="hands-on-title">HTML Editor</h2>
                <span class="activity-badge">Activity: Hands-on Coding</span>
            </div>

            <div class="editor-container">
                <!-- Code Editor -->
                <div class="editor-section">
                    <div class="editor-header">
                        <div class="editor-title">
                            <i class="fas fa-file-code"></i>
                            index.html
                        </div>
                        <button class="run-button" onclick="runCode()">
                            <i class="fas fa-play"></i> Run Code
                        </button>
                    </div>
                    <div id="editor"></div>
                </div>

                <!-- Output -->
                <div class="output-section">
                    <div class="output-header">
                        <div class="d-flex align-items-center" style="gap: 0.5rem;">
                            <i class="fas fa-desktop"></i>
                            <span>Live Preview - See Your Code Come to Life!</span>
                        </div>
                        <button class="expand-btn" id="openPreviewBtn" title="Open in new tab">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path
                                    d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" />
                            </svg>
                        </button>
                    </div>
                    <iframe id="output"></iframe>
                </div>
            </div>
        </div>
    </div>

        <!-- Payment Modal -->
    <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="paymentModalLabel">Upgrade to Full Course - Secure Payment</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <i class="fas fa-crown fa-3x text-warning"></i>
                        <h4 class="mt-3">Unlock the Full Course</h4>
                        <p class="text-muted">Get access to all 10 lessons and premium content for just $5.00! Secure payment powered by Stripe.</p>
                    </div>
                    <div class="d-flex justify-content-center">
                        <div class="card border-primary mb-3" style="max-width: 18rem;">
                            <div class="card-header bg-primary text-white">Course Access</div>
                            <div class="card-body">
                                <h5 class="card-title">$5.00</h5>
                                <p class="card-text">
                                    <i class="fas fa-check text-success me-2"></i> All 10 lessons<br>
                                    <i class="fas fa-check text-success me-2"></i> Premium content<br>
                                    <i class="fas fa-check text-success me-2"></i> Lifetime access<br>
                                    <i class="fas fa-check text-success me-2"></i> Certificate of completion
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="pay-button">
                        <i class="fas fa-lock me-2"></i>Pay $5.00 with Stripe
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <script>
        // Define openPreviewInNewTab in global scope so it can be accessed by the button
        let globalEditor;

        function openPreviewInNewTab() {
            if (globalEditor) {
                const code = globalEditor.getValue();
                const blob = new Blob([code], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                window.open(url, '_blank');
            }
        }

        function runCode() {
            const code = editor.getValue();
            const output = document.getElementById('output');

            // Create a blob URL for the HTML content
            const blob = new Blob([code], { type: 'text/html' });
            const url = URL.createObjectURL(blob);

            output.src = url;

            // Update progress based on code completion
            updateProgress(code);
        }

        function updateProgress(code) {
            const progressFill = document.querySelector('.progress-fill');
            const progressText = document.getElementById('progress-text');
            let progress = 10; // Base progress

            // Check for various HTML elements and award points
            if (code.includes('<!DOCTYPE html>')) progress += 15;
            if (code.includes('<html>')) progress += 10;
            if (code.includes('<head>')) progress += 10;
            if (code.includes('<title>')) progress += 10;
            if (code.includes('<body>')) progress += 10;
            if (code.includes('<h1>')) progress += 10;
            if (code.includes('<p>')) progress += 10;
            if (code.includes('<h2>') || code.includes('<h3>')) progress += 10;
            if (code.includes('<img')) progress += 10;

            // Bonus points for customization
            if (!code.includes('[Your Name Here]') && code.includes('My name is')) progress += 5;
            if (!code.includes('[Your Age]') && code.includes('I am')) progress += 5;

            const finalProgress = Math.min(progress, 100);
            progressFill.style.width = finalProgress + '%';
            progressText.textContent = finalProgress + '%';
        }

        let editor;

        // Initialize Monaco Editor
        require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs' } });
        require(['vs/editor/editor.main'], function () {
            editor = monaco.editor.create(document.getElementById('editor'), {
                value: `<!DOCTYPE html>
<html>
<head>
    <title>My First Webpage</title>
</head>
<body>
    <h1>Hello World!</h1>
    <p>Welcome to my very first website!</p>
    
    <h2>About Me</h2>
    <p>My name is [Your Name Here]</p>
    <p>I am [Your Age] years old</p>
    <p>My favorite hobby is [Your Hobby]</p>
    
    <h3>Fun Fact</h3>
    <p>I'm learning to build websites and it's amazing!</p>
    
    <!-- This is a comment - it won't show on the webpage -->
    <!-- Try adding your own content below! -->
    
    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100'><rect width='100' height='100' fill='%23FFD700'/><circle cx='35' cy='35' r='5' fill='%23000'/><circle cx='65' cy='35' r='5' fill='%23000'/><path d='M25 75 Q50 95 75 75' stroke='%23000' stroke-width='3' fill='none'/></svg>" alt="Happy Smiley Face" style="width: 100px;">
</body>
</html>`,
                language: 'html',
                theme: 'vs',
                fontSize: 14,
                minimap: { enabled: false },
                scrollBeyondLastLine: false,
                automaticLayout: true,
                tabSize: 2,
                insertSpaces: true,
                wordWrap: 'on',
                lineNumbers: 'on',
                folding: true,
                bracketMatching: 'always',
                autoIndent: 'full'
            });

            // Store reference to global scope
            globalEditor = editor;

            // Auto-run code when user stops typing
            let timeout;
            editor.onDidChangeModelContent(() => {
                clearTimeout(timeout);
                timeout = setTimeout(runCode, 1500);
            });

            // Initial run
            runCode();

            // Attach event listener to the open preview button
            document.getElementById('openPreviewBtn').addEventListener('click', openPreviewInNewTab);
        });

        // login();

        // Show upgrade button when user is logged in
        function showUpgradeButton() {
            document.getElementById('upgrade-container').classList.remove('d-none');
        }

        // Set up event listeners after DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Handle upgrade button click
            const upgradeButton = document.getElementById('upgrade-button');
            if (upgradeButton) {
                upgradeButton.addEventListener('click', function() {
                    // Show the payment modal
                    const paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'));
                    paymentModal.show();
                });
            }

            // Handle pay button click
            const payButton = document.getElementById('pay-button');
            if (payButton) {
                payButton.addEventListener('click', function() {
                    // Redirect to Stripe payment link
                    window.location.href = 'https://buy.stripe.com/test_14AfZhdUKeXi6AD1cb93y00?client_reference_id=test123';
                });
            }
        });
    </script>
</body>

</html>