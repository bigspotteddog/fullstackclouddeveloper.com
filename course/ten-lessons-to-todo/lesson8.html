<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 8: Building the Todo App Structure</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border-color: #e2e8f0;
            --accent-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --code-bg: #f8fafc;
            --code-border: #e2e8f0;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            line-height: 1.6;
        }

        .layout-container {
            display: flex;
            min-height: calc(100vh - 58px);
        }

        /* Left Instruction Panel */
        .instruction-panel {
            width: 50%;
            background-color: var(--bg-primary);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            position: fixed;
            height: calc(100vh - 58px);
            left: 0;
            top: 58px;
        }

        .instruction-header {
            padding: 2rem;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--bg-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-button {
            background-color: var(--accent-color);
            color: white;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-button:hover {
            background-color: #2563eb;
            transform: translateY(-1px);
            color: white;
            text-decoration: none;
        }

        .instruction-header h1 {
            font-size: 2rem;
            font-weight: 700;
            margin: 0;
            color: var(--text-primary);
        }

        .lesson-meta {
            font-size: 1rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .instruction-content {
            padding: 2rem;
        }

        .section {
            margin-bottom: 2.5rem;
        }

        .section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent-color);
        }

        .section h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            margin-top: 1.5rem;
        }

        .section p {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.7;
        }

        .objectives-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .objectives-list li {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.75rem;
            background-color: var(--bg-tertiary);
            border-radius: 8px;
            border-left: 4px solid var(--accent-color);
        }

        .objectives-list li .icon {
            color: var(--accent-color);
            margin-top: 0.125rem;
            font-size: 0.875rem;
        }

        .explanation-box {
            background-color: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid var(--success-color);
        }

        .explanation-box h4 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tag-explanation {
            background-color: var(--code-bg);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid var(--code-border);
        }

        .tag-item {
            display: flex;
            flex-direction: column;
            margin-bottom: 1.25rem;
            padding-bottom: 1.25rem;
            border-bottom: 1px solid var(--border-color);
        }

        .tag-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .tag-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .tag-name {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.875rem;
            background-color: var(--accent-color);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 500;
        }

        .tag-purpose {
            color: var(--text-muted);
            font-size: 0.875rem;
            font-weight: 500;
        }

        .tag-description {
            color: var(--text-secondary);
            font-size: 0.9375rem;
            line-height: 1.6;
        }

        .progress-container {
            background-color: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .progress-bar {
            background-color: var(--border-color);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .progress-fill {
            background-color: var(--accent-color);
            height: 100%;
            width: 10%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        /* Right Hands-on Panel */
        .hands-on-panel {
            width: 50%;
            margin-left: 50%;
            display: flex;
            flex-direction: column;
            background-color: var(--bg-primary);
            height: calc(100vh - 58px);}

        .hands-on-header {
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .hands-on-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
            color: var(--text-primary);
        }

        .activity-badge {
            background-color: var(--accent-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .editor-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 1rem;
            gap: 1rem;
            height: calc(100vh - 58px - 4rem);
            overflow: hidden;
        }

        .editor-section {
            flex: 1;
            background-color: var(--bg-primary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            overflow: hidden;
            min-height: 0;
            display: flex;
            flex-direction: column;
        }

        .editor-header {
            background-color: var(--bg-secondary);
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .editor-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .run-button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .run-button:hover {
            background-color: #2563eb;
            transform: translateY(-1px);
        }

        #editor {
            flex: 1;
            width: 100%;
            min-height: 300px;
        }

        .output-section {
            flex: 1;
            background-color: var(--bg-primary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        min-height: 200px;
            display: flex;
            flex-direction: column;
        }

        .output-header {
            background-color: var(--bg-secondary);
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.5rem;
        }

        .expand-btn {
            background: none;
            border: none;
            padding: 0.25rem;
            cursor: pointer;
            color: var(--text-secondary);
            border-radius: 4px;
            line-height: 0;
        }

        .expand-btn:hover {
            background-color: var(--border-color);
            color: var(--text-primary);
        }

        .expand-btn svg {
            width: 16px;
            height: 16px;
        }

        #output {
            flex: 1;
            background: white;
            border: none;
            width: 100%;
        min-height: 0;
        }

        .tip-box {
            background-color: #fef3c7;
            border: 1px solid #fde68a;
            ;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid var(--warning-color);
        }

        .tip-box h5 {
            color: #92400e;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tip-box p {
            color: #92400e;
            margin: 0;
            font-size: 0.9375rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .layout-container {
                flex-direction: column;
            }

            .instruction-panel {
                width: 100%;
                height: auto;
                position: relative;
                top: 0;
            }

            .hands-on-panel {
                width: 100%;
                margin-left: 0;
                margin-top: 0;
                min-height: calc(100vh - 58px);
                height: auto;
            }

            .editor-container {
                height: calc(100vh - 58px - 2rem);
            }

            .instruction-header,
            .hands-on-header {
                padding: 1rem;
            }

            .instruction-content {
                padding: 1rem;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="auth-container">
        <style>
            .navbar {
                border-bottom: 1px solid #dedede;
            }

            .layout-container {
                min-height: calc(100vh - 58px);
            }

            .instruction-panel {}
        </style>
        <nav class="navbar navbar-expand bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand" href="/">Learn to Decode - Classes</a>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <!-- <div class="navbar-nav">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                        <a class="nav-link" href="#">Features</a>
                        <a class="nav-link" href="#">Pricing</a>
                    </div> -->
                </div>
                <div id="profile-container" class="dropdown d-none">
                    <img id="profile-picture" src="" class="rounded-circle dropdown-toggle"
                        style="width: 40px; height: 40px;" data-bs-toggle="dropdown" aria-expanded="false">
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li>
                            <h6 class="dropdown-header" id="profile-nickname"></h6>
                        </li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="#" id="logout-button">Logout</a></li>
                    </ul>
                </div>
                <div class="ms-auto">
                    <div id="login-container" class="d-none">
                        <ul class="navbar-nav">
                            <li class="nav-item"><a class="nav-link" href="#" id="sign-up-button">Sign Up</a></li>
                            <li class="nav-item"><a class="nav-link" href="#" id="login-button">Login</a></li>
                        </ul>
                    </div>
                    <div id="profile-container" class="dropdown d-none">
                        <a href="#">
                            <img id="profile-picture" src="" class="rounded-circle dropdown-toggle"
                                style="width: 40px; height: 40px;" data-bs-toggle="dropdown" aria-expanded="false">
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <h6 class="dropdown-header" id="profile-nickname"></h6>
                            </li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#" id="logout-button">Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
        <script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>
        <script src="auth0-service.js"></script>
        <script src="login.js"></script>
    </div>

    <div class="layout-container">
        <!-- Left Instruction Panel -->
        <div class="instruction-panel">
            <div class="instruction-header">
                <div>
                    <h1>Lesson 8: Building the Todo App Structure</h1>
                    <div class="lesson-meta">
                        <div class="meta-item">
                            <i class="fas fa-clock text-muted"></i>
                            <span>45 minutes</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-users text-muted"></i>
                            <span>Ages 8-18+</span>
                        </div>
                    </div>
                </div>
                <a href="index.html?lesson=8" class="back-button">
                    <i class="fas fa-arrow-left"></i> Back to Lessons
                </a>
            </div>

            <div class="instruction-content">
                <div class="progress-container">
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="fw-medium">Lesson Progress</span>
                        <span class="text-muted" id="progress-text">10%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                </div>

                <div class="section">
                    <h2><i class="fas fa-tasks"></i> What You'll Learn Today</h2>
                    <p>Today is a big day! We're going to start building our very own Todo List application. This
                        project will bring together everything you've learned so far about HTML, CSS, and JavaScript
                        into one fun, practical app.</p>

                    <div class="explanation-box">
                        <h4><i class="fas fa-question-circle"></i> Why Build a Todo App?</h4>
                        <p>The Todo App is a classic project for a reason! It's simple enough to understand but complex
                            enough to teach you how to manage data, update the screen, and handle user interactions in a
                            real application. It's like building your first mini-house with all the tools you've
                            collected!</p>
                    </div>

                    <h3>Learning Objectives</h3>
                    <ul class="objectives-list">
                        <li>
                            <i class="fas fa-check-circle icon"></i>
                            <div>
                                <strong>Plan and structure</strong> a simple web application, thinking about how
                                different parts work together.
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle icon"></i>
                            <div>
                                <strong>Implement basic add and display functionality</strong> for tasks in our todo
                                list.
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-check-circle icon"></i>
                            <div>
                                <strong>Combine HTML, CSS, and JavaScript skills</strong> to create a working,
                                interactive application.
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="section">
                    <h2><i class="fas fa-cogs"></i> Core Concepts: State & Rendering</h2>
                    <p>In a web application, we often have "data" (like our list of todos) and a "display" (what the
                        user sees on the screen). When the data changes, we need to update the display. This is called
                        <strong>rendering</strong>.</p>

                    <div class="tag-explanation">
                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">let todos = [];</span>
                                <span class="tag-purpose">Application State</span>
                            </div>
                            <div class="tag-description">
                                This array will hold all our todo tasks. It's like the brain of our app, remembering
                                everything. When we add a todo, we add it to this array.
                            </div>
                        </div>

                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">function addTodo() { ... }</span>
                                <span class="tag-purpose">Adding Data</span>
                            </div>
                            <div class="tag-description">
                                This function will take the text from the input box and add it to our `todos` array.
                                After adding, it will call `displayTodos()` to update the screen.
                            </div>
                        </div>

                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">function displayTodos() { ... }</span>
                                <span class="tag-purpose">Rendering the UI</span>
                            </div>
                            <div class="tag-description">
                                This function is super important! It looks at our `todos` array and builds all the HTML
                                for the list items. It then puts that HTML onto the page, making sure the screen always
                                matches our data.
                            </div>
                        </div>
                        <div class="tag-item">
                            <div class="tag-header">
                                <span class="tag-name">Global State Management</span>
                                <span class="tag-purpose">Keeping Track</span>
                            </div>
                            <div class="tag-description">
                                By keeping our `todos` array outside of any function, it's a "global" variable. This
                                means all our functions can see and change it, making it easy to manage the app's data
                                from anywhere.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2><i class="fas fa-tasks"></i> Your Mission: Build the Basic Todo App</h2>
                    <p>Your mission is to implement the `addBasicTodo()` and `displayBasicTodos()` functions. The HTML
                        structure is already provided in the editor.</p>

                    <div class="tip-box">
                        <h5><i class="fas fa-lightbulb"></i> Pro Tip</h5>
                        <p>Remember to call `displayBasicTodos()` both when the page loads (after defining the function)
                            and every time a new todo is added!</p>
                    </div>

                    <ul class="objectives-list">
                        <li>
                            <i class="fas fa-plus-circle icon"></i>
                            <div>
                                <strong>Step 1: Implement `addBasicTodo()`.</strong>
                                <ul>
                                    <li>Get the value from the input field (`basicTodoInput`).</li>
                                    <li>Add the new todo text to the `basicTodos` array.</li>
                                    <li>Clear the input field.</li>
                                    <li>Call `displayBasicTodos()` to update the list on the screen.</li>
                                </ul>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-desktop icon"></i>
                            <div>
                                <strong>Step 2: Implement `displayBasicTodos()`.</strong>
                                <ul>
                                    <li>Get a reference to the `basicTodoList` `&lt;ul&gt;` element.</li>
                                    <li>Use the `map()` array method to transform each todo in `basicTodos` into an HTML
                                        `&lt;li&gt;` string.</li>
                                    <li>Use `join('')` to combine all the `&lt;li&gt;` strings into one big string.</li>
                                    <li>Set the `innerHTML` of `basicTodoList` to this combined HTML string.</li>
                                </ul>
                            </div>
                        </li>
                        <li>
                            <i class="fas fa-play-circle icon"></i>
                            <div>
                                <strong>Step 3: Initial Display.</strong> Call `displayBasicTodos()` once when the
                                script first runs to show any initial todos.
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="section">
                    <h2><i class="fas fa-home"></i> Take It Home</h2>
                    <p>Think about how you might add a "mark as complete" or "delete" button to each todo item. We'll
                        explore these advanced features in the next lesson!</p>
                </div>
            </div>
        </div>

        <!-- Right Hands-on Panel -->
        <div class="hands-on-panel">
            <div class="hands-on-header">
                <h2 class="hands-on-title">Todo App Editor</h2>
                <span class="activity-badge">Activity: Building Core Features</span>
            </div>

            <div class="editor-container">
                <!-- Code Editor -->
                <div class="editor-section">
                    <div class="editor-header">
                        <div class="editor-title">
                            <i class="fas fa-file-code"></i>
                            index.html
                        </div>
                        <button class="run-button" onclick="runCode()">
                            <i class="fas fa-play"></i> Run Code
                        </button>
                    </div>
                    <div id="editor"></div>
                </div>

                <!-- Output -->
                <div class="output-section">
                    <div class="output-header">
                        <div class="d-flex align-items-center" style="gap: 0.5rem;">
                            <i class="fas fa-desktop"></i>
                            <span>Live Preview</span>
                        </div>
                        <button class="expand-btn" id="openPreviewBtn" title="Open in new tab">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path
                                    d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" />
                            </svg>
                        </button>
                    </div>
                    <iframe id="output"></iframe>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <script>
        // Define openPreviewInNewTab in global scope so it can be accessed by the button
        let globalEditor;

        function openPreviewInNewTab() {
            if (globalEditor) {
                const code = globalEditor.getValue();
                const blob = new Blob([code], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                window.open(url, '_blank');
            }
        }

        let editor;

        // Initialize Monaco Editor
        require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs' } });
        require(['vs/editor/editor.main'], function () {
            editor = monaco.editor.create(document.getElementById('editor'), {
                value: `<!DOCTYPE html>
<html>
<head>
    <title>Basic Todo App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <style>
        body { 
            padding: 20px; 
            background-color: aliceblue;
        }
        .todo-app {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        .todo-header {
            text-align: center;
            margin-bottom: 2rem;
            color: #4a5568;
        }
        .add-todo-form {
            margin-bottom: 2rem;
        }
        .form-control {
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            padding: 12px 15px;
            font-size: 1rem;
        }
        .btn-add {
            border: none;
            border-radius: 10px;
            padding: 12px 20px;
            font-weight: 600;
        }
        .todo-list {
            list-style: none;
            padding: 0;
        }
        .todo-item {
            background: white;
            border-radius: 10px;
            margin-bottom: 1rem;
            padding: 1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-left: 4px solid #667eea;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .todo-content {
            display: flex;
            align-items: center;
            flex-grow: 1;
        }
    </style>
</head>
<body>

    <div class="todo-app">
        <div class="todo-header">
            <h2><i class="fas fa-tasks"></i> My Todo List</h2>
        </div>
        
        <form id="basicTodoForm" class="add-todo-form" onsubmit="addBasicTodo(event)">
            <div class="input-group">
                <input type="text" id="basicTodoInput" class="form-control" placeholder="Add a new task..." required>
                <button type="submit" class="btn btn-primary btn-add">Add Task</button>
            </div>
        </form>
        
        <ul id="basicTodoList" class="todo-list">
            <!-- Todos will be rendered here -->
        </ul>
    </div>

    <script>
        let basicTodos = ['Learn HTML basics ✓', 'Style with CSS and Bootstrap ✓', 'Add JavaScript interactivity'];

        function addBasicTodo(event) {
            // STEP 1: Implement the addBasicTodo function
            event.preventDefault(); // prevents the default form submit
            // Hint: Get input field
            // Hint: Set a variable to its value
            // Hint: Make sure it is not empty or just spaces
            // Hint: Add it to the basicTodos array
            // Hint: Clear the input value
            // Hint: Call the display function
        }

        function displayBasicTodos() {
            // STEP 2: Implement the displayBasicTodos function
            // Hint: Get the list <ul> element
            // Hint: Use basicTodos.map() to create HTML for each todo
            // Hint: basicTodos.map(todo => '<li class="todo-item"><div class="todo-content"><span class="todo-text">' + todo + '</span></div></li>').join('');
            // Hint: Set the innerHTML of the list
        }

        // STEP 3: Call displayBasicTodos to show initial todos
    <\/script>

</body>
</html>`,
                language: 'html',
                theme: 'vs',
                fontSize: 14,
                minimap: { enabled: false },
                scrollBeyondLastLine: false,
                automaticLayout: true,
                tabSize: 4,
                insertSpaces: true,
                wordWrap: 'on',
                lineNumbers: 'on',
                folding: true,
                bracketMatching: 'always',
                autoIndent: 'full'
            });

            // Store reference to global scope
            globalEditor = editor;

            // Auto-run code when user stops typing
            let timeout;
            editor.onDidChangeModelContent(() => {
                clearTimeout(timeout);
                timeout = setTimeout(runCode, 500);
            });

            // Initial run
            runCode();

            // Attach event listener to the open preview button
            document.getElementById('openPreviewBtn').addEventListener('click', openPreviewInNewTab);
        });

        function runCode() {
            const code = editor.getValue();
            const output = document.getElementById('output');

            const blob = new Blob([code], { type: 'text/html' });
            const url = URL.createObjectURL(blob);

            output.src = url;

            updateProgress(code);
        }

        function updateProgress(code) {
            const progressFill = document.querySelector('.progress-fill');
            const progressText = document.getElementById('progress-text');
            let progress = 10; // Base progress for having the initial code structure

            // Check for Step 1: Basic structure setup
            if (code.includes("let basicTodos = [")) progress += 15;

            // Check for Step 2: addBasicTodo function implementation
            if (code.includes("event.preventDefault()")) progress += 15;
            if (code.includes("document.getElementById('basicTodoInput')")) progress += 10;
            if (code.includes(".value.trim()")) progress += 10;
            if (code.includes("basicTodos.push(") && code.includes("text")) progress += 15;
            if (code.includes("input.value = ''")) progress += 10;

            // Check for Step 3: displayBasicTodos function implementation  
            if (code.includes("document.getElementById('basicTodoList')")) progress += 10;
            if (code.includes("basicTodos.map(") && code.includes("todo =>")) progress += 10;
            if (code.includes("list.innerHTML =")) progress += 5;

            // Final step: Initial call to display todos
            if (code.includes("displayBasicTodos();") && !code.includes("// Hint: displayBasicTodos();")) progress += 10;

            const finalProgress = Math.min(progress, 100);
            progressFill.style.width = finalProgress + '%';
            progressText.textContent = finalProgress + '%';
        }

        login();
    </script>
</body>

</html>